# 网络连接问题排查指南

## 🔍 问题诊断

你遇到的错误：
```
ERR_NAME_NOT_RESOLVED
Failed to fetch
```

这表明浏览器无法解析 Supabase 服务器的域名。

---

## 🌐 可能的原因

### 1. DNS 解析问题
- 本地 DNS 服务器无法解析 `ptmgncjechjprxtndqon.supabase.co`
- DNS 缓存损坏

### 2. 网络访问限制
- 防火墙阻止
- 公司/学校网络限制
- 地区网络限制（中国大陆用户）

### 3. Supabase 服务问题
- Supabase 服务暂时不可用（较少见）

---

## 🔧 解决方案

### 方案 1: 更换 DNS 服务器（推荐）

#### Windows
1. 打开"控制面板" → "网络和 Internet" → "网络和共享中心"
2. 点击当前连接 → "属性"
3. 选择"Internet 协议版本 4 (TCP/IPv4)" → "属性"
4. 选择"使用下面的 DNS 服务器地址"
5. 输入：
   - 首选 DNS: `8.8.8.8` (Google DNS)
   - 备用 DNS: `1.1.1.1` (Cloudflare DNS)
6. 点击"确定"

#### macOS
1. 系统偏好设置 → 网络
2. 选择当前连接 → "高级"
3. "DNS" 标签
4. 点击 "+" 添加：
   - `8.8.8.8`
   - `1.1.1.1`
5. 点击"好"

#### 验证
打开命令行，输入：
```bash
nslookup ptmgncjechjprxtndqon.supabase.co
```

如果返回 IP 地址，说明 DNS 解析成功。

---

### 方案 2: 清除 DNS 缓存

#### Windows
```cmd
ipconfig /flushdns
```

#### macOS
```bash
sudo dscacheutil -flushcache
sudo killall -HUP mDNSResponder
```

#### Linux
```bash
sudo systemd-resolve --flush-caches
```

---

### 方案 3: 使用 VPN 或代理

如果你在网络受限的环境（如中国大陆），可能需要：

1. **使用 VPN**
   - 连接到支持访问国际服务的 VPN
   - 确保 VPN 稳定可靠

2. **使用代理**
   - 配置浏览器代理设置
   - 使用支持 HTTPS 的代理

---

### 方案 4: 检查防火墙设置

#### Windows Defender 防火墙
1. 控制面板 → Windows Defender 防火墙
2. 高级设置 → 出站规则
3. 确保没有阻止浏览器访问 `*.supabase.co`

#### macOS 防火墙
1. 系统偏好设置 → 安全性与隐私 → 防火墙
2. 防火墙选项
3. 确保浏览器有网络访问权限

---

### 方案 5: 使用其他网络

尝试切换到其他网络：
- 使用手机热点
- 切换到其他 WiFi
- 使用有线网络

这可以帮助确定是否是特定网络的问题。

---

## 🧪 测试 Supabase 连接

在浏览器控制台（F12）中运行：

```javascript
fetch('https://ptmgncjechjprxtndqon.supabase.co/rest/v1/')
  .then(response => {
    console.log('✅ Supabase 可访问', response.status);
  })
  .catch(error => {
    console.error('❌ Supabase 不可访问', error);
  });
```

如果返回 `✅ Supabase 可访问`，说明网络连接正常。

---

## 🌍 中国大陆用户特别说明

Supabase 服务器在海外，中国大陆用户可能无法直接访问。

### 解决方案

1. **使用 VPN**（推荐）
   - 选择稳定的 VPN 服务
   - 连接到香港、日本或新加坡节点

2. **自建后端**
   - 在国内云服务商（阿里云、腾讯云）部署后端
   - 修改应用配置指向自建服务器

3. **使用国内替代方案**
   - LeanCloud
   - Bmob
   - 野狗（Wilddog）

---

## 📊 诊断检查清单

在联系技术支持前，请完成以下检查：

- [ ] 尝试访问 https://supabase.com （如果无法访问，说明网络限制）
- [ ] 更换 DNS 服务器（8.8.8.8）
- [ ] 清除 DNS 缓存
- [ ] 尝试其他网络（手机热点）
- [ ] 检查防火墙设置
- [ ] 在浏览器控制台测试 Supabase 连接
- [ ] 确认是否在网络受限地区

---

## 🆘 仍然无法解决？

如果以上方法都无效，请提供以下信息：

1. **操作系统**: Windows / macOS / Linux
2. **浏览器**: Chrome / Firefox / Safari
3. **网络环境**: 家庭 / 公司 / 学校 / 公共 WiFi
4. **地理位置**: 国家/地区
5. **错误截图**: 浏览器控制台的完整错误信息
6. **DNS 测试结果**: `nslookup ptmgncjechjprxtndqon.supabase.co` 的输出

---

## 🎯 临时解决方案：本地开发模式

如果你只是想测试应用功能，可以：

1. 在本地运行开发服务器
2. 使用 Mock 数据
3. 等待网络问题解决后再连接云端

---

**更新日期**: 2025-01-02  
**适用版本**: V251219.43+

