# ğŸ†• åˆ›å»ºæ–° Supabase é¡¹ç›®æŒ‡å—

## èƒŒæ™¯

æ—§é¡¹ç›® `ptmgncjechjprxtndqon.supabase.co` çš„ DNS æ— æ³•è§£æï¼ˆNXDOMAINï¼‰ï¼Œå¯èƒ½éœ€è¦åˆ›å»ºæ–°é¡¹ç›®ã€‚

---

## ğŸ“‹ æ­¥éª¤ 1ï¼šåˆ›å»ºæ–°é¡¹ç›®

### 1.1 è®¿é—® Supabase
```
https://supabase.com/dashboard
```

### 1.2 åˆ›å»ºæ–°é¡¹ç›®
1. ç‚¹å‡» **"New Project"**
2. å¡«å†™ä¿¡æ¯ï¼š
   - **Name**: Medsï¼ˆæˆ–å…¶ä»–åç§°ï¼‰
   - **Database Password**: è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆè®°ä½å®ƒï¼ï¼‰
   - **Region**: é€‰æ‹©æœ€è¿‘çš„åŒºåŸŸï¼ˆå¦‚ Singaporeï¼‰
   - **Pricing Plan**: Free æˆ– Pro

3. ç‚¹å‡» **"Create new project"**

4. ç­‰å¾… 2-5 åˆ†é’Ÿé¡¹ç›®åˆå§‹åŒ–

---

## ğŸ“‹ æ­¥éª¤ 2ï¼šè·å–é¡¹ç›®é…ç½®

### 2.1 è·å– URL å’Œ API Key

é¡¹ç›®åˆ›å»ºå®Œæˆåï¼š

1. è¿›å…¥é¡¹ç›®è®¾ç½®ï¼š**Settings** â†’ **API**
2. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š

```
Project URL: https://xxxxx.supabase.co
anon public key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## ğŸ“‹ æ­¥éª¤ 3ï¼šæ‰§è¡Œæ•°æ®åº“è¿ç§»

### 3.1 æ‰“å¼€ SQL Editor

åœ¨ Supabase Dashboardï¼š
1. ç‚¹å‡»å·¦ä¾§ **SQL Editor**
2. ç‚¹å‡» **"New query"**

### 3.2 ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹ SQL æ–‡ä»¶

**é¡ºåºå¾ˆé‡è¦ï¼**

#### 1ï¸âƒ£ åŸºç¡€è¡¨ç»“æ„
```sql
-- å¤åˆ¶ supabase-schema.sql çš„å†…å®¹å¹¶æ‰§è¡Œ
```

#### 2ï¸âƒ£ ç”¨æˆ·è®¾ç½®è¡¨
```sql
-- å¤åˆ¶ supabase-user-settings-schema.sql çš„å†…å®¹å¹¶æ‰§è¡Œ
```

#### 3ï¸âƒ£ å¿«ç…§åŠŸèƒ½
```sql
-- å¤åˆ¶ supabase_snapshots_migration.sql çš„å†…å®¹å¹¶æ‰§è¡Œ
```

#### 4ï¸âƒ£ å®æ—¶åŒæ­¥
```sql
-- å¤åˆ¶ supabase-realtime-migration.sql çš„å†…å®¹å¹¶æ‰§è¡Œ
```

#### 5ï¸âƒ£ å­˜å‚¨è®¾ç½®
```sql
-- å¤åˆ¶ supabase-storage-setup.sql çš„å†…å®¹å¹¶æ‰§è¡Œ
```

æ¯ä¸ªæ–‡ä»¶æ‰§è¡Œåï¼Œç¡®è®¤æ²¡æœ‰é”™è¯¯ã€‚

---

## ğŸ“‹ æ­¥éª¤ 4ï¼šå¯ç”¨ Realtime

### 4.1 å¯ç”¨è¡¨çš„å®æ—¶åŒæ­¥

1. è¿›å…¥ **Database** â†’ **Replication**
2. æ‰¾åˆ°ä»¥ä¸‹è¡¨å¹¶å¯ç”¨ï¼š
   - âœ… `medications`
   - âœ… `medication_logs`
   - âœ… `user_settings`
   - âœ… `snapshots`

---

## ğŸ“‹ æ­¥éª¤ 5ï¼šé…ç½® Storage

### 5.1 åˆ›å»º Storage Bucket

1. è¿›å…¥ **Storage**
2. ç‚¹å‡» **"Create a new bucket"**
3. åˆ›å»ºä»¥ä¸‹ bucketsï¼š
   - **avatars** - ç”¨æˆ·å¤´åƒ
   - **medication-photos** - è¯å“ç…§ç‰‡

### 5.2 è®¾ç½® Bucket æƒé™

å¯¹æ¯ä¸ª bucketï¼š
1. ç‚¹å‡» bucket åç§°
2. ç‚¹å‡» **"Policies"**
3. æ·»åŠ ç­–ç•¥ï¼ˆå‚è€ƒ `supabase-storage-setup.sql`ï¼‰

---

## ğŸ“‹ æ­¥éª¤ 6ï¼šæ›´æ–°åº”ç”¨é…ç½®

### 6.1 æ›´æ–° Supabase é…ç½®æ–‡ä»¶

ç¼–è¾‘ `src/lib/supabase.ts`ï¼š

```typescript
// æ›´æ–°ä¸ºæ–°é¡¹ç›®çš„é…ç½®
const DEFAULT_SUPABASE_URL = 'https://xxxxx.supabase.co';
const DEFAULT_SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';
```

### 6.2 é‡æ–°æ„å»ºåº”ç”¨

```bash
npm run build
```

---

## ğŸ“‹ æ­¥éª¤ 7ï¼šæµ‹è¯•æ–°é¡¹ç›®

### 7.1 æœ¬åœ°æµ‹è¯•

```bash
npm run dev
```

è®¿é—®ï¼š`http://localhost:5173/meds/`

### 7.2 æµ‹è¯•åŠŸèƒ½

1. **æ³¨å†Œæ–°è´¦å·**
   - é‚®ç®±ï¼štest@example.com
   - å¯†ç ï¼šTest123456

2. **æµ‹è¯•åŸºç¡€åŠŸèƒ½**
   - æ·»åŠ è¯å“
   - æ·»åŠ æœè¯è®°å½•
   - ä¸Šä¼ å¤´åƒ

3. **æµ‹è¯•å¤šè®¾å¤‡åŒæ­¥**
   - åœ¨ä¸¤ä¸ªè®¾å¤‡ä¸Šç™»å½•
   - æµ‹è¯•å®æ—¶åŒæ­¥

---

## ğŸ“‹ æ­¥éª¤ 8ï¼šéƒ¨ç½²åˆ° GitHub Pages

### 8.1 æ›´æ–°ä»£ç 

```bash
git add src/lib/supabase.ts
git commit -m "æ›´æ–° Supabase é…ç½®åˆ°æ–°é¡¹ç›®"
git push origin main
```

### 8.2 é‡æ–°éƒ¨ç½²

å¦‚æœä½¿ç”¨ GitHub Actionsï¼Œæ¨é€åä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚

---

## ğŸ” éªŒè¯æ¸…å•

éƒ¨ç½²å®Œæˆåï¼ŒéªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

### åŸºç¡€åŠŸèƒ½
- [ ] å¯ä»¥æ³¨å†Œæ–°è´¦å·
- [ ] å¯ä»¥ç™»å½•
- [ ] å¯ä»¥æ·»åŠ è¯å“
- [ ] å¯ä»¥æ·»åŠ æœè¯è®°å½•
- [ ] å¯ä»¥ä¸Šä¼ ç…§ç‰‡
- [ ] å¯ä»¥ä¿®æ”¹ç”¨æˆ·è®¾ç½®

### å¤šè®¾å¤‡åŒæ­¥
- [ ] åŒæ­¥çŠ¶æ€æ˜¾ç¤º ğŸŸ¢ å·²è¿æ¥
- [ ] åœ¨è®¾å¤‡ A æ·»åŠ è¯å“ï¼Œè®¾å¤‡ B è‡ªåŠ¨æ˜¾ç¤º
- [ ] åœ¨è®¾å¤‡ B ç¼–è¾‘è¯å“ï¼Œè®¾å¤‡ A è‡ªåŠ¨æ›´æ–°
- [ ] åˆ é™¤æ“ä½œæ­£å¸¸åŒæ­¥

### æ€§èƒ½
- [ ] åŒæ­¥å»¶è¿Ÿ < 2 ç§’
- [ ] ç•Œé¢å“åº”æµç•…
- [ ] æ— æ˜æ˜¾é”™è¯¯

---

## ğŸ“š SQL æ–‡ä»¶ä½ç½®

é¡¹ç›®ä¸­çš„ SQL è¿ç§»æ–‡ä»¶ï¼š

```
/Users/lorenmac/Downloads/26å¹´è½¯ä»¶é¡¹ç›®/Meds/meds/
â”œâ”€â”€ supabase-schema.sql                    # åŸºç¡€è¡¨ç»“æ„
â”œâ”€â”€ supabase-user-settings-schema.sql      # ç”¨æˆ·è®¾ç½®
â”œâ”€â”€ supabase_snapshots_migration.sql       # å¿«ç…§åŠŸèƒ½
â”œâ”€â”€ supabase-realtime-migration.sql        # å®æ—¶åŒæ­¥
â””â”€â”€ supabase-storage-setup.sql             # å­˜å‚¨é…ç½®
```

---

## âš ï¸ é‡è¦æé†’

### 1. ä¿å­˜é…ç½®ä¿¡æ¯

åˆ›å»ºé¡¹ç›®åï¼Œç«‹å³ä¿å­˜ï¼š
- Project URL
- anon public key
- Database Password

### 2. æ•°æ®è¿ç§»

å¦‚æœæ—§é¡¹ç›®ä¸­æœ‰é‡è¦æ•°æ®ï¼š
1. å…ˆæ¢å¤æ—§é¡¹ç›®
2. å¯¼å‡ºæ•°æ®
3. å¯¼å…¥åˆ°æ–°é¡¹ç›®

### 3. ç¯å¢ƒå˜é‡

å¦‚æœä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œæ›´æ–° `.env` æ–‡ä»¶ï¼š
```bash
VITE_SUPABASE_URL=https://xxxxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### é—®é¢˜ 1ï¼šSQL æ‰§è¡Œå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ SQL è¯­æ³•
- ç¡®è®¤æŒ‰é¡ºåºæ‰§è¡Œ
- æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 2ï¼šRealtime ä¸å·¥ä½œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤å·²å¯ç”¨è¡¨çš„ Replication
- æ£€æŸ¥ RLS ç­–ç•¥
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

### é—®é¢˜ 3ï¼šStorage ä¸Šä¼ å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤ bucket å·²åˆ›å»º
- æ£€æŸ¥ RLS ç­–ç•¥
- éªŒè¯æ–‡ä»¶å¤§å°é™åˆ¶

---

## âœ… å®Œæˆç¡®è®¤

å½“ä»¥ä¸‹æ‰€æœ‰é¡¹éƒ½å®Œæˆæ—¶ï¼Œæ–°é¡¹ç›®é…ç½®æˆåŠŸï¼š

- [ ] æ–°é¡¹ç›®å·²åˆ›å»º
- [ ] æ‰€æœ‰ SQL è¿ç§»å·²æ‰§è¡Œ
- [ ] Realtime å·²å¯ç”¨
- [ ] Storage å·²é…ç½®
- [ ] åº”ç”¨é…ç½®å·²æ›´æ–°
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æˆåŠŸ
- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

**ç¥æ‚¨é…ç½®é¡ºåˆ©ï¼** ğŸ‰

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒç›¸å…³æ–‡æ¡£æˆ–å¯»æ±‚å¸®åŠ©ã€‚

